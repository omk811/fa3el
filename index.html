<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الفاعل - الصف الخامس</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
            min-height: 100vh;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(59, 130, 246, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .bounce-in {
            animation: bounceIn 0.8s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3) rotate(-10deg); opacity: 0; }
            50% { transform: scale(1.1) rotate(5deg); }
            70% { transform: scale(0.9) rotate(-2deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        /* تحسينات إضافية للوضوح والتفاعل */
        .interactive-example:hover {
            transform: translateY(-8px) scale(1.02) !important;
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.3) !important;
            border-color: rgba(59, 130, 246, 0.6) !important;
        }
        
        /* تحسين التباين للنصوص */
        .text-gray-800 {
            color: #1f2937 !important;
            font-weight: 600 !important;
        }
        
        .text-gray-700 {
            color: #374151 !important;
            font-weight: 500 !important;
        }
        
        /* تحسين الحدود والظلال */
        .border-2 {
            border-width: 3px !important;
        }
        
        .shadow-lg {
            box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.15), 0 4px 6px -2px rgba(0, 0, 0, 0.1) !important;
        }
        
        /* تحسين التركيز للوصولية */
        button:focus, .word-clickable:focus {
            outline: 4px solid #3b82f6 !important;
            outline-offset: 2px !important;
        }
        
        /* تحسين للشاشات فائقة الكبر */
        @media (min-width: 2560px) {
            body {
                font-size: 32px !important;
            }
            
            h1 {
                font-size: 8rem !important;
            }
            
            h2 {
                font-size: 5rem !important;
            }
            
            button {
                font-size: 2.5rem !important;
                padding: 2rem 4rem !important;
                min-height: 6rem !important;
            }
            
            .word-clickable, .word-item, .sentence-word {
                font-size: 3rem !important;
                padding: 2rem 4rem !important;
                min-height: 6rem !important;
            }
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .highlight-verb {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            padding: 6px 12px;
            border-radius: 12px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .highlight-subject {
            background: linear-gradient(45deg, #48cae4, #023e8a);
            padding: 6px 12px;
            border-radius: 12px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .card-3d {
            transform-style: preserve-3d;
            transition: all 0.5s ease;
        }
        
        .card-3d:hover {
            transform: rotateY(5deg) rotateX(5deg) translateZ(20px);
        }
        
        .gradient-text {
            background: linear-gradient(45deg, #1e40af, #059669, #dc2626);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .pulse-glow {
            animation: pulseGlow 2s infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 107, 107, 0.5); }
            50% { box-shadow: 0 0 40px rgba(255, 107, 107, 0.8); }
        }
        
        .interactive-example {
            background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(248,250,252,0.9));
            backdrop-filter: blur(10px);
            border: 2px solid rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .interactive-example:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.5);
        }

        .exercise-nav-btn.active {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="min-h-screen py-8">
        <div class="container mx-auto px-4 max-w-6xl">
            <!-- Header with floating animation -->
            <div class="text-center mb-12 float-animation">
                <div class="glass-effect rounded-3xl p-8 mb-8">
                    <h1 class="text-6xl font-bold gradient-text mb-4">🌟 الفاعل 🌟</h1>
                    <p class="text-2xl text-gray-700 font-semibold">للصف الخامس الأساسي</p>
                    <div class="mt-4 flex justify-center space-x-4">
                        <span class="bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-bold shadow-md">نحو</span>
                        <span class="bg-green-600 text-white px-4 py-2 rounded-full text-sm font-bold shadow-md">تفاعلي</span>
                        <span class="bg-purple-600 text-white px-4 py-2 rounded-full text-sm font-bold shadow-md">ممتع</span>
                    </div>
                </div>
            </div>

            <!-- Introduction Section with new design -->
            <div class="glass-effect rounded-3xl p-8 mb-12 card-3d">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">📚 تعريف الفاعل</h2>
                
                <!-- تذكير سريع عن الفعل -->
                <div class="mb-8">
                    <div class="bg-gradient-to-r from-blue-500 to-indigo-600 p-6 rounded-2xl border-2 border-blue-200 shadow-lg">
                        <h3 class="text-xl font-bold text-white mb-3">💡 تذكير: الفعل</h3>
                        <p class="text-white text-lg">
                            الفعل كلمة تدل على عمل أو حدث (ماضي - مضارع - أمر)
                        </p>
                        <div class="mt-3 flex flex-wrap gap-2">
                            <span class="highlight-verb text-sm">كتب</span>
                            <span class="highlight-verb text-sm">يكتب</span>
                            <span class="highlight-verb text-sm">اكتب</span>
                        </div>
                    </div>
                </div>
                
                <!-- الفاعل -->
                <div class="bg-gradient-to-br from-green-500 to-teal-600 p-8 rounded-2xl shadow-lg">
                    <h3 class="text-2xl font-bold text-white mb-4">👤 الفاعل</h3>
                    <div class="bg-white bg-opacity-95 p-6 rounded-xl mb-6 border-2 border-green-200 shadow-md">
                        <p class="text-gray-800 text-xl leading-relaxed font-semibold">
                            الفاعل: <strong class="text-green-700">اسم مرفوع يأتي بعد الفعل ليدل على من قام بالفعل ويكون مرفوعاً بالضمة</strong>
                        </p>
                    </div>
                    
                    <h4 class="text-xl font-bold text-white mb-4">حالات الفاعل:</h4>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="bg-white bg-opacity-90 p-4 rounded-xl border-2 border-blue-200 shadow-md">
                            <h5 class="font-bold text-blue-700 mb-2">1️⃣ الاسم المفرد</h5>
                            <p class="text-gray-700 text-sm mb-2">يرفع بالضمة الظاهرة</p>
                            <div class="bg-blue-50 p-2 rounded border border-blue-200">
                                <p class="text-gray-800 text-sm">لعب <span class="highlight-subject text-xs">الولدُ</span></p>
                            </div>
                        </div>
                        
                        <div class="bg-white bg-opacity-90 p-4 rounded-xl border-2 border-green-200 shadow-md">
                            <h5 class="font-bold text-green-700 mb-2">2️⃣ جمع التكسير</h5>
                            <p class="text-gray-700 text-sm mb-2">يرفع بالضمة الظاهرة</p>
                            <div class="bg-green-50 p-2 rounded border border-green-200">
                                <p class="text-gray-800 text-sm">لعب <span class="highlight-subject text-xs">الأولادُ</span></p>
                            </div>
                        </div>
                        
                        <div class="bg-white bg-opacity-90 p-4 rounded-xl border-2 border-purple-200 shadow-md">
                            <h5 class="font-bold text-purple-700 mb-2">3️⃣ جمع المؤنث السالم</h5>
                            <p class="text-gray-700 text-sm mb-2">يرفع بالضمة الظاهرة</p>
                            <div class="bg-purple-50 p-2 rounded border border-purple-200">
                                <p class="text-gray-800 text-sm">لعبت <span class="highlight-subject text-xs">البناتُ</span></p>
                            </div>
                        </div>
                        
                        <div class="bg-white bg-opacity-90 p-4 rounded-xl border-2 border-orange-200 shadow-md">
                            <h5 class="font-bold text-orange-700 mb-2">4️⃣ الضمائر المتصلة</h5>
                            <p class="text-gray-700 text-sm mb-2">مبني في محل رفع فاعل</p>
                            <div class="bg-orange-50 p-2 rounded border border-orange-200">
                                <p class="text-gray-800 text-sm">لعب<span class="highlight-subject text-xs">تُ</span></p>
                            </div>
                        </div>
                        
                        <div class="bg-white bg-opacity-90 p-4 rounded-xl border-2 border-teal-200 shadow-md">
                            <h5 class="font-bold text-teal-700 mb-2">5️⃣ الضمير المستتر</h5>
                            <p class="text-gray-700 text-sm mb-2">ضمير مخفي يُقدر</p>
                            <div class="bg-teal-50 p-2 rounded border border-teal-200">
                                <p class="text-gray-800 text-sm">يلعب (هو)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interactive Examples Section - Enhanced -->
            <div class="glass-effect rounded-3xl p-8 mb-12 card-3d">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">🎯 أمثلة تفاعلية على حالات الفاعل</h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Example 1 -->
                    <div class="interactive-example p-6 rounded-2xl cursor-pointer" onclick="highlightPartsWithType(this, 'لعب', 'الولدُ', 'اسم مفرد مرفوع بالضمة الظاهرة')">
                        <p class="text-xl text-center text-gray-800 font-semibold">
                            <span class="verb-part">لعب</span> <span class="subject-part">الولدُ</span> في الحديقة
                        </p>
                        <p class="text-sm text-gray-600 text-center mt-2">اضغط لإظهار الفعل والفاعل (اسم مفرد)</p>
                    </div>
                    
                    <!-- Example 2 -->
                    <div class="interactive-example p-6 rounded-2xl cursor-pointer" onclick="highlightPartsWithType(this, 'لعب', 'الأولادُ', 'جمع تكسير مرفوع بالضمة الظاهرة')">
                        <p class="text-xl text-center text-gray-800 font-semibold">
                            <span class="verb-part">لعب</span> <span class="subject-part">الأولادُ</span> في الحديقة
                        </p>
                        <p class="text-sm text-gray-600 text-center mt-2">اضغط لإظهار الفعل والفاعل (جمع تكسير)</p>
                    </div>
                    
                    <!-- Example 3 -->
                    <div class="interactive-example p-6 rounded-2xl cursor-pointer" onclick="highlightPartsWithType(this, 'لعبت', 'البناتُ', 'جمع مؤنث سالم مرفوع بالضمة الظاهرة')">
                        <p class="text-xl text-center text-gray-800 font-semibold">
                            <span class="verb-part">لعبت</span> <span class="subject-part">البناتُ</span> في الحديقة
                        </p>
                        <p class="text-sm text-gray-600 text-center mt-2">اضغط لإظهار الفعل والفاعل (جمع مؤنث سالم)</p>
                    </div>
                    
                    <!-- Example 4 -->
                    <div class="interactive-example p-6 rounded-2xl cursor-pointer" onclick="highlightPartsWithType(this, 'لعبت', 'التاء', 'ضمير متصل مبني في محل رفع فاعل')">
                        <p class="text-xl text-center text-gray-800 font-semibold">
                            <span class="verb-part">لعب</span><span class="subject-part">تُ</span> في الحديقة
                        </p>
                        <p class="text-sm text-gray-600 text-center mt-2">اضغط لإظهار الفعل والفاعل (ضمير متصل)</p>
                    </div>
                    
                    <!-- Example 5 -->
                    <div class="interactive-example p-6 rounded-2xl cursor-pointer" onclick="highlightPartsWithType(this, 'يلعب', 'هو (مستتر)', 'ضمير مستتر تقديره (هو)')">
                        <p class="text-xl text-center text-gray-800 font-semibold">
                            <span class="verb-part">يلعب</span> في الحديقة
                        </p>
                        <p class="text-sm text-gray-600 text-center mt-2">اضغط لإظهار الفعل والفاعل (ضمير مستتر)</p>
                    </div>
                    
                    <!-- Example 6 -->
                    <div class="interactive-example p-6 rounded-2xl cursor-pointer" onclick="highlightPartsWithType(this, 'جاء', 'المعلمُ', 'اسم مفرد مرفوع بالضمة الظاهرة')">
                        <p class="text-xl text-center text-gray-800 font-semibold">
                            <span class="verb-part">جاء</span> <span class="subject-part">المعلمُ</span> إلى المدرسة
                        </p>
                        <p class="text-sm text-gray-600 text-center mt-2">اضغط لإظهار الفعل والفاعل (اسم مفرد)</p>
                    </div>
                    
                    <!-- Example 7 -->
                    <div class="interactive-example p-6 rounded-2xl cursor-pointer" onclick="highlightPartsWithType(this, 'قرأت', 'الطالبةُ', 'اسم مفرد مرفوع بالضمة الظاهرة')">
                        <p class="text-xl text-center text-gray-800 font-semibold">
                            <span class="verb-part">قرأت</span> <span class="subject-part">الطالبةُ</span> الكتاب
                        </p>
                        <p class="text-sm text-gray-600 text-center mt-2">اضغط لإظهار الفعل والفاعل (اسم مفرد)</p>
                    </div>
                    
                    <!-- Example 8 -->
                    <div class="interactive-example p-6 rounded-2xl cursor-pointer" onclick="highlightPartsWithType(this, 'كتبوا', 'الواو', 'ضمير متصل مبني في محل رفع فاعل')">
                        <p class="text-xl text-center text-gray-800 font-semibold">
                            <span class="verb-part">كتب</span><span class="subject-part">وا</span> الواجب
                        </p>
                        <p class="text-sm text-gray-600 text-center mt-2">اضغط لإظهار الفعل والفاعل (ضمير متصل)</p>
                    </div>
                    
                    <!-- Example 9 -->
                    <div class="interactive-example p-6 rounded-2xl cursor-pointer" onclick="highlightPartsWithType(this, 'تدرس', 'هي (مستتر)', 'ضمير مستتر تقديره (هي)')">
                        <p class="text-xl text-center text-gray-800 font-semibold">
                            <span class="verb-part">تدرس</span> بجد
                        </p>
                        <p class="text-sm text-gray-600 text-center mt-2">اضغط لإظهار الفعل والفاعل (ضمير مستتر)</p>
                    </div>
                    
                    <!-- Example 10 -->
                    <div class="interactive-example p-6 rounded-2xl cursor-pointer" onclick="highlightPartsWithType(this, 'سافرت', 'الأسرُ', 'جمع تكسير مرفوع بالضمة الظاهرة')">
                        <p class="text-xl text-center text-gray-800 font-semibold">
                            <span class="verb-part">سافرت</span> <span class="subject-part">الأسرُ</span> في الإجازة
                        </p>
                        <p class="text-sm text-gray-600 text-center mt-2">اضغط لإظهار الفعل والفاعل (جمع تكسير)</p>
                    </div>
                </div>
            </div>

            <!-- Comprehensive Exercises Section -->
            <div class="glass-effect rounded-3xl p-8 mb-12 card-3d">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">📚 التدريبات الشاملة</h2>
                
                <!-- Exercise Navigation -->
                <div class="flex flex-wrap justify-center gap-4 mb-8">
                    <button onclick="showExercise('identify')" class="exercise-nav-btn bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-all duration-300 font-bold shadow-lg border-2 border-blue-500 active">
                        🔍 تحديد الفاعل
                    </button>
                    <button onclick="showExercise('classify')" class="exercise-nav-btn bg-green-600 text-white px-6 py-3 rounded-xl hover:bg-green-700 transition-all duration-300 font-bold shadow-lg border-2 border-green-500">
                        📝 تصنيف الفاعل
                    </button>
                    <button onclick="showExercise('complete')" class="exercise-nav-btn bg-purple-600 text-white px-6 py-3 rounded-xl hover:bg-purple-700 transition-all duration-300 font-bold shadow-lg border-2 border-purple-500">
                        ✏️ إكمال الجمل
                    </button>
                    <button onclick="showExercise('correct')" class="exercise-nav-btn bg-orange-600 text-white px-6 py-3 rounded-xl hover:bg-orange-700 transition-all duration-300 font-bold shadow-lg border-2 border-orange-500">
                        🔧 تصحيح الأخطاء
                    </button>
                </div>

                <!-- Exercise 1: Identify Subject -->
                <div id="identify-exercise" class="exercise-section">
                    <div class="bg-white border-2 border-blue-400 p-8 rounded-2xl shadow-lg">
                        <h3 class="text-2xl font-bold text-blue-700 mb-6 text-center">🔍 تدريب تحديد الفاعل</h3>
                        <p class="text-gray-700 text-lg mb-6 text-center">اقرأ الجملة واضغط على الفاعل</p>
                        
                        <div id="identify-container">
                            <div class="bg-blue-50 p-6 rounded-xl mb-6 border-2 border-blue-200">
                                <p class="text-xl text-center text-gray-800 mb-4" id="identify-sentence">
                                    <span class="word-clickable" data-type="verb">لعب</span>
                                    <span class="word-clickable" data-type="subject">الأطفال</span>
                                    <span class="word-clickable" data-type="other">في</span>
                                    <span class="word-clickable" data-type="other">الحديقة</span>
                                </p>
                                <div id="identify-feedback" class="text-center hidden"></div>
                            </div>
                            
                            <div class="text-center">
                                <button onclick="nextIdentifyExercise()" class="bg-blue-600 text-white px-8 py-3 rounded-xl hover:bg-blue-700 transition-colors font-bold shadow-lg">
                                    الجملة التالية ➡️
                                </button>
                                <button onclick="resetIdentifyExercise()" class="bg-gray-600 text-white px-8 py-3 rounded-xl hover:bg-gray-700 transition-colors font-bold shadow-lg mr-4">
                                    إعادة المحاولة 🔄
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Exercise 2: Classify Subject -->
                <div id="classify-exercise" class="exercise-section hidden">
                    <div class="bg-white border-2 border-green-400 p-8 rounded-2xl shadow-lg">
                        <h3 class="text-2xl font-bold text-green-700 mb-6 text-center">📝 تدريب تصنيف الفاعل</h3>
                        <p class="text-gray-700 text-lg mb-6 text-center">حدد نوع الفاعل في الجملة التالية</p>
                        
                        <div id="classify-container">
                            <div class="bg-green-50 p-6 rounded-xl mb-6 border-2 border-green-200">
                                <p class="text-xl text-center text-gray-800 mb-4" id="classify-sentence">
                                    لعبت <span class="highlight-subject">البنات</span> في الحديقة
                                </p>
                                <p class="text-lg text-center text-green-700 mb-4">ما نوع الفاعل "البنات"؟</p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                                <button class="classify-option bg-white border-2 border-gray-300 hover:border-green-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md" data-answer="false">
                                    اسم مفرد
                                </button>
                                <button class="classify-option bg-white border-2 border-gray-300 hover:border-green-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md" data-answer="true">
                                    جمع مؤنث سالم
                                </button>
                                <button class="classify-option bg-white border-2 border-gray-300 hover:border-green-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md" data-answer="false">
                                    جمع تكسير
                                </button>
                                <button class="classify-option bg-white border-2 border-gray-300 hover:border-green-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md" data-answer="false">
                                    ضمير متصل
                                </button>
                                <button class="classify-option bg-white border-2 border-gray-300 hover:border-green-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md" data-answer="false">
                                    ضمير مستتر
                                </button>
                            </div>
                            
                            <div id="classify-feedback" class="text-center hidden mb-4"></div>
                            
                            <div class="text-center">
                                <button onclick="nextClassifyExercise()" class="bg-green-600 text-white px-8 py-3 rounded-xl hover:bg-green-700 transition-colors font-bold shadow-lg">
                                    الجملة التالية ➡️
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Exercise 3: Complete Sentences -->
                <div id="complete-exercise" class="exercise-section hidden">
                    <div class="bg-white border-2 border-purple-400 p-8 rounded-2xl shadow-lg">
                        <h3 class="text-2xl font-bold text-purple-700 mb-6 text-center">✏️ تدريب إكمال الجمل</h3>
                        <p class="text-gray-700 text-lg mb-6 text-center">اختر الفاعل المناسب لإكمال الجملة</p>
                        
                        <div id="complete-container">
                            <div class="bg-purple-50 p-6 rounded-xl mb-6 border-2 border-purple-200">
                                <p class="text-xl text-center text-gray-800 mb-4" id="complete-sentence">
                                    لعب _______ في الحديقة
                                </p>
                                <p class="text-sm text-center text-purple-600">اختر الفاعل المناسب</p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                <button class="complete-option bg-white border-2 border-gray-300 hover:border-purple-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md" data-answer="true" data-type="جمع تكسير">
                                    الأولاد
                                </button>
                                <button class="complete-option bg-white border-2 border-gray-300 hover:border-purple-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md" data-answer="false">
                                    في المدرسة
                                </button>
                                <button class="complete-option bg-white border-2 border-gray-300 hover:border-purple-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md" data-answer="true" data-type="اسم مفرد">
                                    الطفل
                                </button>
                                <button class="complete-option bg-white border-2 border-gray-300 hover:border-purple-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md" data-answer="false">
                                    بسرعة
                                </button>
                            </div>
                            
                            <div id="complete-feedback" class="text-center hidden mb-4"></div>
                            
                            <div class="text-center">
                                <button onclick="nextCompleteExercise()" class="bg-purple-600 text-white px-8 py-3 rounded-xl hover:bg-purple-700 transition-colors font-bold shadow-lg">
                                    الجملة التالية ➡️
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Exercise 4: Correct Errors -->
                <div id="correct-exercise" class="exercise-section hidden">
                    <div class="bg-white border-2 border-orange-400 p-8 rounded-2xl shadow-lg">
                        <h3 class="text-2xl font-bold text-orange-700 mb-6 text-center">🔧 تدريب تصحيح الأخطاء</h3>
                        <p class="text-gray-700 text-lg mb-6 text-center">اضغط على الكلمة الخاطئة وصححها</p>
                        
                        <div id="correct-container">
                            <div class="bg-orange-50 p-6 rounded-xl mb-6 border-2 border-orange-200">
                                <p class="text-xl text-center text-gray-800 mb-4" id="correct-sentence">
                                    لعب <span class="error-word cursor-pointer bg-red-200 px-2 py-1 rounded" data-correct="الأطفالُ">الأطفالَ</span> في الحديقة
                                </p>
                                <p class="text-sm text-center text-orange-600">اضغط على الكلمة الخاطئة لتصحيحها</p>
                            </div>
                            
                            <div id="correction-options" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 hidden">
                                <button class="correction-option bg-white border-2 border-gray-300 hover:border-orange-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md" data-correction="الأطفالُ">
                                    الأطفالُ
                                </button>
                                <button class="correction-option bg-white border-2 border-gray-300 hover:border-orange-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md" data-correction="الأطفالِ">
                                    الأطفالِ
                                </button>
                                <button class="correction-option bg-white border-2 border-gray-300 hover:border-orange-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md" data-correction="الأطفالَ">
                                    الأطفالَ (كما هي)
                                </button>
                            </div>
                            
                            <div id="correct-feedback" class="text-center hidden mb-4"></div>
                            
                            <div class="text-center">
                                <button onclick="nextCorrectExercise()" class="bg-orange-600 text-white px-8 py-3 rounded-xl hover:bg-orange-700 transition-colors font-bold shadow-lg">
                                    الجملة التالية ➡️
                                </button>
                            </div>
                        </div>
                    </div>
                </div>



                <!-- Exercise Progress -->
                <div class="mt-8 text-center">
                    <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4 rounded-xl shadow-lg inline-block">
                        <p class="text-lg font-bold">إجمالي النقاط: <span id="total-exercise-score">0</span></p>
                    </div>
                </div>
            </div>

            <!-- Enhanced Quiz Section -->
            <div class="glass-effect rounded-3xl p-8 mb-12 card-3d">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">🧩 اختبر معلوماتك</h2>
                
                <div id="quiz-container">
                    <!-- Question 1 -->
                    <div id="question1" class="quiz-question mb-8">
                        <div class="bg-white border-2 border-purple-400 p-6 rounded-2xl mb-4 shadow-lg">
                            <p class="text-xl mb-4 text-center text-gray-800">في الجملة: "لعبت البنات في الحديقة"</p>
                            <p class="text-lg mb-4 text-center font-semibold text-purple-700">ما نوع الفاعل "البنات"؟</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-purple-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 1)">
                                اسم مفرد
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-purple-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, true, 1)">
                                جمع مؤنث سالم
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-purple-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 1)">
                                جمع تكسير
                            </button>
                        </div>
                    </div>
                    
                    <!-- Question 2 -->
                    <div id="question2" class="quiz-question mb-8 hidden">
                        <div class="bg-white border-2 border-green-400 p-6 rounded-2xl mb-4 shadow-lg">
                            <p class="text-xl mb-4 text-center text-gray-800">في الجملة: "يلعب في الحديقة"</p>
                            <p class="text-lg mb-4 text-center font-semibold text-green-700">ما نوع الفاعل؟</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-green-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 2)">
                                اسم ظاهر
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-green-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, true, 2)">
                                ضمير مستتر
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-green-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 2)">
                                ضمير متصل
                            </button>
                        </div>
                    </div>
                    
                    <!-- Question 3 -->
                    <div id="question3" class="quiz-question mb-8 hidden">
                        <div class="bg-white border-2 border-red-400 p-6 rounded-2xl mb-4 shadow-lg">
                            <p class="text-xl mb-4 text-center text-gray-800">في الجملة: "لعبوا في الحديقة"</p>
                            <p class="text-lg mb-4 text-center font-semibold text-red-700">ما إعراب الواو في "لعبوا"؟</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-red-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, true, 3)">
                                ضمير متصل مبني في محل رفع فاعل
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-red-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 3)">
                                حرف عطف
                            </button>
                        </div>
                    </div>
                    
                    <!-- Question 4 -->
                    <div id="question4" class="quiz-question mb-8 hidden">
                        <div class="bg-white border-2 border-orange-400 p-6 rounded-2xl mb-4 shadow-lg">
                            <p class="text-xl mb-4 text-center text-gray-800">في الجملة: "جاء الطلاب إلى الفصل"</p>
                            <p class="text-lg mb-4 text-center font-semibold text-orange-700">ما نوع الفاعل "الطلاب"؟</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-orange-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 4)">
                                اسم مفرد
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-orange-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, true, 4)">
                                جمع تكسير
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-orange-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 4)">
                                جمع مؤنث سالم
                            </button>
                        </div>
                    </div>
                    
                    <!-- Question 5 -->
                    <div id="question5" class="quiz-question mb-8 hidden">
                        <div class="bg-white border-2 border-indigo-400 p-6 rounded-2xl mb-4 shadow-lg">
                            <p class="text-xl mb-4 text-center text-gray-800">أي من الجمل التالية فاعلها ضمير مستتر؟</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-indigo-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 5)">
                                لعبت البنات
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-indigo-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, true, 5)">
                                يدرس بجد
                            </button>
                        </div>
                    </div>
                    
                    <!-- Question 6 -->
                    <div id="question6" class="quiz-question mb-8 hidden">
                        <div class="bg-white border-2 border-pink-400 p-6 rounded-2xl mb-4 shadow-lg">
                            <p class="text-xl mb-4 text-center text-gray-800">في الجملة: "كتبنا الدرس"</p>
                            <p class="text-lg mb-4 text-center font-semibold text-pink-700">ما نوع الفاعل؟</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-pink-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, true, 6)">
                                ضمير متصل
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-pink-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 6)">
                                ضمير مستتر
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-pink-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 6)">
                                اسم ظاهر
                            </button>
                        </div>
                    </div>
                    
                    <!-- Question 7 -->
                    <div id="question7" class="quiz-question mb-8 hidden">
                        <div class="bg-white border-2 border-teal-400 p-6 rounded-2xl mb-4 shadow-lg">
                            <p class="text-xl mb-4 text-center text-gray-800">ما إعراب كلمة "الطلاب" في الجملة: "نجح الطلاب"؟</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-teal-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, true, 7)">
                                فاعل مرفوع بالضمة الظاهرة
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-teal-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 7)">
                                مفعول به منصوب
                            </button>
                        </div>
                    </div>
                    
                    <!-- Question 8 -->
                    <div id="question8" class="quiz-question mb-8 hidden">
                        <div class="bg-white border-2 border-blue-400 p-6 rounded-2xl mb-4 shadow-lg">
                            <p class="text-xl mb-4 text-center text-gray-800">أي من الكلمات التالية يمكن أن تكون فاعلاً؟</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-blue-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 8)">
                                في المدرسة
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-blue-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, true, 8)">
                                الطالب
                            </button>
                            <button class="quiz-option bg-white border-2 border-gray-300 hover:border-blue-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg" onclick="checkAnswer(this, false, 8)">
                                بسرعة
                            </button>
                        </div>
                    </div>
                    
                    <!-- Quiz Results -->
                    <div id="quiz-result" class="text-center mt-6 hidden">
                        <div id="correct-answer" class="bg-green-500 bg-opacity-80 text-white p-6 rounded-2xl hidden pulse-glow">
                            <p class="text-2xl font-bold mb-2">🎉 إجابة صحيحة!</p>
                            <p id="correct-explanation" class="text-lg"></p>
                        </div>
                        <div id="wrong-answer" class="bg-red-500 bg-opacity-80 text-white p-6 rounded-2xl hidden">
                            <p class="text-2xl font-bold mb-2">❌ إجابة خاطئة</p>
                            <p id="wrong-explanation" class="text-lg"></p>
                        </div>
                        <div class="mt-6 space-x-4">
                            <button id="next-question" onclick="nextQuestion()" class="bg-green-600 text-white px-8 py-3 rounded-xl hover:bg-green-700 transition-colors font-semibold shadow-lg hidden">
                                السؤال التالي ➡️
                            </button>
                            <button id="retry-question" onclick="resetCurrentQuestion()" class="bg-purple-600 text-white px-8 py-3 rounded-xl hover:bg-purple-700 transition-colors font-semibold shadow-lg hidden">
                                جرب مرة أخرى 🔄
                            </button>
                            <button id="restart-quiz" onclick="restartQuiz()" class="bg-blue-600 text-white px-8 py-3 rounded-xl hover:bg-blue-700 transition-colors font-semibold shadow-lg hidden">
                                ابدأ من جديد 🔄
                            </button>
                        </div>
                    </div>
                    
                    <div id="quiz-complete" class="text-center mt-6 hidden">
                        <div class="bg-gradient-to-r from-green-400 to-blue-500 text-white p-8 rounded-2xl pulse-glow">
                            <p class="text-3xl font-bold mb-4">🏆 أحسنت!</p>
                            <p class="text-xl mb-2">لقد أكملت الاختبار بنجاح</p>
                            <p class="text-lg">النتيجة: <span id="final-score" class="font-bold text-yellow-300"></span></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Word Game Section -->
            <div class="glass-effect rounded-3xl p-8 mb-12 card-3d">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">🧩 تمرين تجميع الكلمات</h2>
                
                <div class="bg-white border-2 border-yellow-400 p-8 rounded-2xl shadow-lg">
                    <!-- Instructions -->
                    <div class="bg-yellow-50 border-2 border-yellow-300 p-6 rounded-xl mb-8 text-center shadow-md">
                        <h3 class="text-xl font-bold text-yellow-800 mb-3">📋 التعليمات:</h3>
                        <p class="text-gray-800 text-lg">اضغط على الكلمات بالترتيب الصحيح لتكوين جملة فعلية مفيدة</p>
                        <p class="text-gray-700 text-sm mt-2">تذكر: الجملة الفعلية تبدأ بالفعل ثم الفاعل</p>
                    </div>
                    
                    <div id="word-game-container">
                        <!-- Game Progress -->
                        <div class="text-center mb-6">
                            <span class="bg-blue-100 border-2 border-blue-400 text-blue-800 px-6 py-2 rounded-full text-lg font-bold shadow-md">
                                الجملة <span id="current-sentence-number">1</span> من <span id="total-sentences">10</span>
                            </span>
                        </div>
                        
                        <!-- Scattered Words -->
                        <div class="mb-8">
                            <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">🔤 الكلمات المتاحة:</h3>
                            <div id="scattered-words" class="flex flex-wrap gap-4 justify-center min-h-[120px] p-8 bg-blue-50 rounded-2xl border-2 border-blue-200 shadow-inner">
                                <!-- Words will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Sentence Building Area -->
                        <div class="mb-8">
                            <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">✏️ الجملة المكونة:</h3>
                            <div id="sentence-area" class="min-h-[120px] p-8 bg-green-50 rounded-2xl border-2 border-dashed border-green-300 flex flex-wrap gap-4 items-center justify-center shadow-inner">
                                <p class="text-gray-600 text-xl" id="drop-hint">👆 اضغط على الكلمات أعلاه لتكوين الجملة</p>
                            </div>
                        </div>
                        
                        <!-- Control Buttons -->
                        <div class="flex flex-wrap gap-4 justify-center mb-8">
                            <button onclick="checkSentence()" class="bg-green-600 text-white px-8 py-4 rounded-2xl hover:bg-green-700 transition-all duration-300 font-bold shadow-lg transform hover:scale-105 border-2 border-green-500">
                                ✅ تحقق من الجملة
                            </button>
                            <button onclick="clearSentence()" class="bg-gray-600 text-white px-8 py-4 rounded-2xl hover:bg-gray-700 transition-all duration-300 font-bold shadow-lg transform hover:scale-105 border-2 border-gray-500">
                                🗑️ امسح الجملة
                            </button>
                            <button onclick="showHint()" class="bg-yellow-600 text-white px-8 py-4 rounded-2xl hover:bg-yellow-700 transition-all duration-300 font-bold shadow-lg transform hover:scale-105 border-2 border-yellow-500">
                                💡 مساعدة
                            </button>
                            <button onclick="nextWordGame()" class="bg-blue-600 text-white px-8 py-4 rounded-2xl hover:bg-blue-700 transition-all duration-300 font-bold shadow-lg transform hover:scale-105 border-2 border-blue-500">
                                ➡️ جملة جديدة
                            </button>
                        </div>
                        
                        <!-- Hint -->
                        <div id="hint-area" class="hidden mb-6 p-6 bg-yellow-50 border-2 border-yellow-300 rounded-xl text-center shadow-md">
                            <p class="text-yellow-800 font-bold text-lg">💡 تلميح:</p>
                            <p id="hint-text" class="text-gray-800 text-lg mt-2"></p>
                        </div>
                        
                        <!-- Result -->
                        <div id="word-game-result" class="hidden mt-6 p-8 rounded-2xl text-center">
                            <p id="word-game-feedback" class="text-2xl font-bold mb-4"></p>
                            <div id="sentence-analysis" class="text-xl"></div>
                        </div>
                        
                        <!-- Score -->
                        <div class="text-center mt-6">
                            <div class="bg-purple-100 border-2 border-purple-400 inline-block px-8 py-3 rounded-full shadow-md">
                                <span class="text-purple-800 font-bold text-xl">النقاط: <span id="game-score">0</span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Summary Section -->
            <div class="glass-effect rounded-3xl p-8 text-center mb-12">
                <h2 class="text-3xl font-bold mb-8 text-gray-800">📝 ملخص الدرس</h2>
                
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- تعريف الفاعل -->
                    <div class="bg-white border-2 border-purple-400 p-6 rounded-2xl shadow-lg">
                        <h3 class="font-bold mb-4 text-2xl text-purple-700">👤 الفاعل</h3>
                        <div class="space-y-3 text-lg text-gray-800">
                            <p><strong>المعنى:</strong> اسم مرفوع يأتي بعد الفعل ليدل على من قام بالفعل</p>
                            <p><strong>الحركة الإعرابية:</strong> مرفوع بالضمة (ُ)</p>
                            <p><strong>مثال:</strong> لعب الولد<span class="text-purple-600">ُ</span></p>
                        </div>
                    </div>
                    
                    <!-- الاسم الظاهر -->
                    <div class="bg-white border-2 border-blue-400 p-6 rounded-2xl shadow-lg">
                        <h4 class="font-bold mb-4 text-xl text-blue-700">🔤 الاسم الظاهر</h4>
                        <div class="text-gray-800">
                            <p class="text-sm mb-2">مفرد - جمع تكسير - جمع مؤنث سالم</p>
                            <p class="text-sm">يرفع بالضمة الظاهرة</p>
                        </div>
                    </div>
                    
                    <!-- الضمائر -->
                    <div class="bg-white border-2 border-green-400 p-6 rounded-2xl shadow-lg">
                        <h4 class="font-bold mb-4 text-xl text-green-700">🔗 الضمائر</h4>
                        <div class="text-gray-800">
                            <p class="text-sm mb-2">متصلة: تُ، نا، وا</p>
                            <p class="text-sm">مستترة: هو، هي، أنت</p>
                        </div>
                    </div>
                </div>
                
                <p class="mt-8 text-2xl text-gray-800 font-bold">🌟 أحسنت! أنت الآن تعرف الفاعل وحالاته المختلفة 🌟</p>
            </div>
            
            <!-- Teacher Credit -->
            <div class="text-center glass-effect rounded-2xl p-6 mb-8">
                <p class="text-xl font-semibold text-gray-800">📚 إعداد وتصميم:</p>
                <p class="text-3xl font-bold gradient-text mt-2">الأستاذ خليل البلوشي</p>
            </div>
            
            <!-- WhatsApp Channel Link -->
            <div class="text-center glass-effect rounded-2xl p-8 mb-8">
                <div class="bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-2xl shadow-lg">
                    <h3 class="text-2xl font-bold text-white mb-4">📱 تابعنا على الواتساب</h3>
                    <p class="text-white text-lg mb-6">انضم إلى قناتنا للحصول على المزيد من الدروس التفاعلية والمفيدة</p>
                    <a href="https://whatsapp.com/channel/0029VamotBKCxoAy3fzUcv3T" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       class="inline-flex items-center bg-white text-green-600 px-8 py-4 rounded-2xl hover:bg-gray-100 transition-all duration-300 font-bold text-xl shadow-lg transform hover:scale-105 border-2 border-white">
                        <svg class="w-8 h-8 ml-3" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
                        </svg>
                        انضم إلى القناة
                    </a>
                    <p class="text-white text-sm mt-4 opacity-90">🌟 دروس تفاعلية • شروحات مبسطة • تمارين ممتعة</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentQuestion = 1;
        let score = 0;
        const totalQuestions = 8;
        
        // Exercise Variables
        let totalExerciseScore = 0;
        let currentIdentifyIndex = 0;
        let currentClassifyIndex = 0;
        let currentCompleteIndex = 0;
        let currentCorrectIndex = 0;

        // Exercise Data
        const identifyExercises = [
            {
                sentence: ['لعب', 'الأطفال', 'في', 'الحديقة'],
                types: ['verb', 'subject', 'other', 'other'],
                subject: 'الأطفال',
                subjectType: 'جمع تكسير'
            },
            {
                sentence: ['قرأت', 'الطالبة', 'الكتاب', 'بعناية'],
                types: ['verb', 'subject', 'other', 'other'],
                subject: 'الطالبة',
                subjectType: 'اسم مفرد'
            },
            {
                sentence: ['كتبوا', 'الواجب', 'بعناية'],
                types: ['verb-subject', 'other', 'other'],
                subject: 'واو الجماعة في كتبوا',
                subjectType: 'ضمير متصل'
            },
            {
                sentence: ['تدرس', 'المعلمات', 'بجد', 'واجتهاد'],
                types: ['verb', 'subject', 'other', 'other'],
                subject: 'المعلمات',
                subjectType: 'جمع مؤنث سالم'
            },
            {
                sentence: ['يلعب', 'الطفل', 'في', 'الحديقة'],
                types: ['verb', 'subject', 'other', 'other'],
                subject: 'الطفل',
                subjectType: 'اسم مفرد'
            },
            {
                sentence: ['جاءت', 'الطالبات', 'إلى', 'المدرسة'],
                types: ['verb', 'subject', 'other', 'other'],
                subject: 'الطالبات',
                subjectType: 'جمع مؤنث سالم'
            },
            {
                sentence: ['نام', 'الأولاد', 'مبكراً'],
                types: ['verb', 'subject', 'other'],
                subject: 'الأولاد',
                subjectType: 'جمع تكسير'
            }
        ];

        const classifyExercises = [
            {
                sentence: 'لعبت <span class="highlight-subject">البنات</span> في الحديقة',
                subject: 'البنات',
                correct: 'جمع مؤنث سالم',
                options: ['اسم مفرد', 'جمع مؤنث سالم', 'جمع تكسير', 'ضمير متصل', 'ضمير مستتر']
            },
            {
                sentence: 'جاء <span class="highlight-subject">الطلاب</span> إلى المدرسة',
                subject: 'الطلاب',
                correct: 'جمع تكسير',
                options: ['اسم مفرد', 'جمع مؤنث سالم', 'جمع تكسير', 'ضمير متصل', 'ضمير مستتر']
            },
            {
                sentence: 'كتب<span class="highlight-subject">تُ</span> الدرس',
                subject: 'التاء',
                correct: 'ضمير متصل',
                options: ['اسم مفرد', 'جمع مؤنث سالم', 'جمع تكسير', 'ضمير متصل', 'ضمير مستتر']
            },
            {
                sentence: '<span class="highlight-subject">يدرس</span> بجد',
                subject: 'ضمير مستتر (هو)',
                correct: 'ضمير مستتر',
                options: ['اسم مفرد', 'جمع مؤنث سالم', 'جمع تكسير', 'ضمير متصل', 'ضمير مستتر']
            },
            {
                sentence: 'قرأ <span class="highlight-subject">المعلم</span> القصة',
                subject: 'المعلم',
                correct: 'اسم مفرد',
                options: ['اسم مفرد', 'جمع مؤنث سالم', 'جمع تكسير', 'ضمير متصل', 'ضمير مستتر']
            }
        ];

        const completeExercises = [
            {
                sentence: 'لعب _______ في الحديقة',
                options: [
                    {text: 'الأولاد', correct: true, type: 'جمع تكسير'},
                    {text: 'في المدرسة', correct: false, type: ''},
                    {text: 'الطفل', correct: true, type: 'اسم مفرد'},
                    {text: 'بسرعة', correct: false, type: ''}
                ]
            },
            {
                sentence: 'قرأت _______ الكتاب',
                options: [
                    {text: 'الطالبات', correct: true, type: 'جمع مؤنث سالم'},
                    {text: 'في المكتبة', correct: false, type: ''},
                    {text: 'البنت', correct: true, type: 'اسم مفرد'},
                    {text: 'بصوت عالٍ', correct: false, type: ''}
                ]
            },
            {
                sentence: 'جاء _______ إلى المدرسة',
                options: [
                    {text: 'المعلمون', correct: true, type: 'جمع مذكر سالم'},
                    {text: 'مبكراً', correct: false, type: ''},
                    {text: 'الطالب', correct: true, type: 'اسم مفرد'},
                    {text: 'من البيت', correct: false, type: ''}
                ]
            }
        ];

        const correctExercises = [
            {
                sentence: 'لعب <span class="error-word cursor-pointer bg-red-200 px-2 py-1 rounded" data-correct="الأطفالُ">الأطفالَ</span> في الحديقة',
                error: 'الأطفالَ',
                correct: 'الأطفالُ',
                explanation: 'الفاعل يرفع بالضمة، والصحيح هو "الأطفالُ"',
                options: ['الأطفالُ', 'الأطفالِ', 'الأطفالَ (كما هي)']
            },
            {
                sentence: 'قرأت <span class="error-word cursor-pointer bg-red-200 px-2 py-1 rounded" data-correct="الطالبةُ">الطالبةَ</span> الكتاب',
                error: 'الطالبةَ',
                correct: 'الطالبةُ',
                explanation: 'الفاعل يرفع بالضمة، والصحيح هو "الطالبةُ"',
                options: ['الطالبةُ', 'الطالبةِ', 'الطالبةَ (كما هي)']
            },
            {
                sentence: 'جاء <span class="error-word cursor-pointer bg-red-200 px-2 py-1 rounded" data-correct="المعلمُ">المعلمَ</span> إلى الفصل',
                error: 'المعلمَ',
                correct: 'المعلمُ',
                explanation: 'الفاعل يرفع بالضمة، والصحيح هو "المعلمُ"',
                options: ['المعلمُ', 'المعلمِ', 'المعلمَ (كما هي)']
            }
        ];


        
        const questionData = {
            1: {
                correct: "البنات هو جمع مؤنث سالم، يرفع بالضمة الظاهرة",
                wrong: "البنات جمع مؤنث سالم وليس اسم مفرد أو جمع تكسير"
            },
            2: {
                correct: "الفاعل هنا ضمير مستتر تقديره (هو)",
                wrong: "لا يوجد اسم ظاهر في الجملة، الفاعل مستتر"
            },
            3: {
                correct: "الواو ضمير متصل يدل على الجماعة، مبني في محل رفع فاعل",
                wrong: "الواو هنا ليست حرف عطف بل ضمير متصل"
            },
            4: {
                correct: "الطلاب جمع تكسير يرفع بالضمة الظاهرة",
                wrong: "الطلاب جمع تكسير وليس اسم مفرد أو جمع مؤنث سالم"
            },
            5: {
                correct: "يدرس فعل مضارع فاعله ضمير مستتر تقديره (هو)",
                wrong: "لعبت البنات فاعلها اسم ظاهر وليس ضمير مستتر"
            },
            6: {
                correct: "نا ضمير متصل مبني في محل رفع فاعل",
                wrong: "نا ضمير متصل وليس مستتر أو اسم ظاهر"
            },
            7: {
                correct: "الطلاب فاعل مرفوع بالضمة الظاهرة لأنه جمع تكسير",
                wrong: "الطلاب فاعل وليس مفعول به"
            },
            8: {
                correct: "الطالب اسم يمكن أن يكون فاعلاً",
                wrong: "في المدرسة وبسرعة ليستا أسماء بل ظروف وأحوال"
            }
        };

        function highlightPartsWithType(element, verb, subject, type) {
            const verbSpan = element.querySelector('.verb-part');
            const subjectSpan = element.querySelector('.subject-part');
            
            verbSpan.classList.add('highlight-verb', 'bounce-in');
            subjectSpan.classList.add('highlight-subject', 'bounce-in');
            
            // Add explanation with detailed parsing
            let explanation = element.querySelector('.explanation');
            if (!explanation) {
                explanation = document.createElement('div');
                explanation.className = 'explanation mt-6 p-6 bg-white bg-opacity-95 rounded-xl text-sm border-2 border-blue-300 shadow-lg';
                
                // Determine verb type and parsing
                let verbParsing = '';
                let subjectParsing = '';
                
                // Verb parsing based on the verb
                if (verb === 'لعب' || verb === 'جاء' || verb === 'قرأت' || verb === 'لعبت' || verb === 'سافرت') {
                    verbParsing = 'فعل ماضٍ مبني على الفتح';
                } else if (verb === 'يلعب' || verb === 'تدرس') {
                    verbParsing = 'فعل مضارع مرفوع بالضمة';
                } else if (verb === 'لعبت' && subject === 'التاء') {
                    verbParsing = 'فعل ماضٍ مبني على السكون لاتصاله بالتاء';
                } else if (verb === 'كتبوا') {
                    verbParsing = 'فعل ماضٍ مبني على الضم لاتصاله بواو الجماعة';
                }
                
                // Subject parsing based on type
                if (type.includes('اسم مفرد')) {
                    subjectParsing = 'فاعل مرفوع وعلامة رفعه الضمة الظاهرة على آخره';
                } else if (type.includes('جمع تكسير')) {
                    subjectParsing = 'فاعل مرفوع وعلامة رفعه الضمة الظاهرة على آخره';
                } else if (type.includes('جمع مؤنث سالم')) {
                    subjectParsing = 'فاعل مرفوع وعلامة رفعه الضمة الظاهرة على آخره';
                } else if (type.includes('ضمير متصل')) {
                    subjectParsing = 'ضمير متصل مبني في محل رفع فاعل';
                } else if (type.includes('ضمير مستتر')) {
                    subjectParsing = 'ضمير مستتر وجوباً تقديره (هو) في محل رفع فاعل';
                    if (verb === 'تدرس') {
                        subjectParsing = 'ضمير مستتر وجوباً تقديره (هي) في محل رفع فاعل';
                    }
                }
                
                explanation.innerHTML = `
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-red-50 p-4 rounded-lg border-2 border-red-200">
                            <h4 class="font-bold text-red-700 mb-2 text-lg">🔴 إعراب الفعل:</h4>
                            <p class="text-gray-800 mb-2"><span class="highlight-verb text-sm">${verb}</span></p>
                            <p class="text-gray-700 text-sm font-semibold">${verbParsing}</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg border-2 border-blue-200">
                            <h4 class="font-bold text-blue-700 mb-2 text-lg">🔵 إعراب الفاعل:</h4>
                            <p class="text-gray-800 mb-2"><span class="highlight-subject text-sm">${subject}</span></p>
                            <p class="text-gray-700 text-sm font-semibold">${subjectParsing}</p>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-green-50 rounded-lg border-2 border-green-200">
                        <p class="text-green-800 font-bold text-center">💡 نوع الفاعل: ${type}</p>
                    </div>
                `;
                element.appendChild(explanation);
            }
        }

        // Exercise Functions
        function showExercise(type) {
            // Hide all exercises
            document.querySelectorAll('.exercise-section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.exercise-nav-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-blue-700', 'bg-green-700', 'bg-purple-700', 'bg-orange-700', 'bg-red-700');
            });
            
            // Show selected exercise and activate button
            const exerciseSection = document.getElementById(`${type}-exercise`);
            exerciseSection.classList.remove('hidden');
            
            // Activate corresponding button
            event.target.classList.add('active');
            
            // Initialize the exercise
            switch(type) {
                case 'identify':
                    initializeIdentifyExercise();
                    break;
                case 'classify':
                    initializeClassifyExercise();
                    break;
                case 'complete':
                    initializeCompleteExercise();
                    break;
                case 'correct':
                    initializeCorrectExercise();
                    break;
            }
        }

        // Identify Exercise Functions
        function initializeIdentifyExercise() {
            loadIdentifyExercise();
        }

        function loadIdentifyExercise() {
            const exercise = identifyExercises[currentIdentifyIndex];
            const sentenceElement = document.getElementById('identify-sentence');
            
            sentenceElement.innerHTML = '';
            exercise.sentence.forEach((word, index) => {
                const span = document.createElement('span');
                span.className = 'word-clickable px-3 py-2 mx-1 rounded-lg cursor-pointer hover:bg-blue-200 transition-all duration-300 border-2 border-transparent inline-block';
                span.textContent = word;
                span.dataset.type = exercise.types[index];
                span.addEventListener('click', handleIdentifyClick);
                sentenceElement.appendChild(span);
                
                // Add space between words except for the last word
                if (index < exercise.sentence.length - 1) {
                    sentenceElement.appendChild(document.createTextNode(' '));
                }
            });
            
            document.getElementById('identify-feedback').classList.add('hidden');
        }

        function handleIdentifyClick(e) {
            const clickedType = e.target.dataset.type;
            const exercise = identifyExercises[currentIdentifyIndex];
            const feedbackElement = document.getElementById('identify-feedback');
            
            // Reset all word styles
            document.querySelectorAll('.word-clickable').forEach(word => {
                word.classList.remove('bg-green-500', 'bg-red-500', 'text-white');
            });
            
            if (clickedType === 'subject' || clickedType === 'verb-subject') {
                e.target.classList.add('bg-green-500', 'text-white');
                feedbackElement.innerHTML = `
                    <div class="bg-green-100 border-2 border-green-400 p-4 rounded-xl">
                        <p class="text-green-800 font-bold text-lg">🎉 ممتاز! هذا هو الفاعل</p>
                        <p class="text-green-700">"${exercise.subject}" - ${exercise.subjectType}</p>
                    </div>
                `;
                totalExerciseScore += 10;
                updateExerciseScore();
            } else {
                e.target.classList.add('bg-red-500', 'text-white');
                feedbackElement.innerHTML = `
                    <div class="bg-red-100 border-2 border-red-400 p-4 rounded-xl">
                        <p class="text-red-800 font-bold text-lg">❌ هذه ليست الفاعل</p>
                        <p class="text-red-700">الفاعل هو: "${exercise.subject}" - ${exercise.subjectType}</p>
                    </div>
                `;
            }
            
            feedbackElement.classList.remove('hidden');
        }

        function nextIdentifyExercise() {
            currentIdentifyIndex = (currentIdentifyIndex + 1) % identifyExercises.length;
            loadIdentifyExercise();
        }

        function resetIdentifyExercise() {
            loadIdentifyExercise();
        }

        // Classify Exercise Functions
        function initializeClassifyExercise() {
            loadClassifyExercise();
        }

        function loadClassifyExercise() {
            const exercise = classifyExercises[currentClassifyIndex];
            document.getElementById('classify-sentence').innerHTML = exercise.sentence;
            
            const container = document.getElementById('classify-container');
            const optionsContainer = container.querySelector('.grid');
            optionsContainer.innerHTML = '';
            
            exercise.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'classify-option bg-white border-2 border-gray-300 hover:border-green-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md';
                button.textContent = option;
                button.dataset.answer = option === exercise.correct ? 'true' : 'false';
                button.addEventListener('click', handleClassifyClick);
                optionsContainer.appendChild(button);
            });
            
            document.getElementById('classify-feedback').classList.add('hidden');
        }

        function handleClassifyClick(e) {
            const isCorrect = e.target.dataset.answer === 'true';
            const exercise = classifyExercises[currentClassifyIndex];
            const feedbackElement = document.getElementById('classify-feedback');
            
            // Disable all buttons
            document.querySelectorAll('.classify-option').forEach(btn => {
                btn.disabled = true;
            });
            
            if (isCorrect) {
                e.target.classList.add('bg-green-500', 'text-white');
                feedbackElement.innerHTML = `
                    <div class="bg-green-100 border-2 border-green-400 p-4 rounded-xl">
                        <p class="text-green-800 font-bold text-lg">🎉 إجابة صحيحة!</p>
                        <p class="text-green-700">"${exercise.subject}" هو ${exercise.correct}</p>
                    </div>
                `;
                totalExerciseScore += 15;
            } else {
                e.target.classList.add('bg-red-500', 'text-white');
                feedbackElement.innerHTML = `
                    <div class="bg-red-100 border-2 border-red-400 p-4 rounded-xl">
                        <p class="text-red-800 font-bold text-lg">❌ إجابة خاطئة</p>
                        <p class="text-red-700">الإجابة الصحيحة: ${exercise.correct}</p>
                    </div>
                `;
            }
            
            feedbackElement.classList.remove('hidden');
            updateExerciseScore();
        }

        function nextClassifyExercise() {
            currentClassifyIndex = (currentClassifyIndex + 1) % classifyExercises.length;
            loadClassifyExercise();
        }

        // Complete Exercise Functions
        function initializeCompleteExercise() {
            loadCompleteExercise();
        }

        function loadCompleteExercise() {
            const exercise = completeExercises[currentCompleteIndex];
            document.getElementById('complete-sentence').textContent = exercise.sentence;
            
            const container = document.getElementById('complete-container');
            const optionsContainer = container.querySelector('.grid');
            optionsContainer.innerHTML = '';
            
            exercise.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'complete-option bg-white border-2 border-gray-300 hover:border-purple-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md';
                button.textContent = option.text;
                button.dataset.answer = option.correct ? 'true' : 'false';
                button.dataset.type = option.type;
                button.addEventListener('click', handleCompleteClick);
                optionsContainer.appendChild(button);
            });
            
            document.getElementById('complete-feedback').classList.add('hidden');
        }

        function handleCompleteClick(e) {
            const isCorrect = e.target.dataset.answer === 'true';
            const type = e.target.dataset.type;
            const feedbackElement = document.getElementById('complete-feedback');
            
            // Disable all buttons
            document.querySelectorAll('.complete-option').forEach(btn => {
                btn.disabled = true;
            });
            
            if (isCorrect) {
                e.target.classList.add('bg-green-500', 'text-white');
                feedbackElement.innerHTML = `
                    <div class="bg-green-100 border-2 border-green-400 p-4 rounded-xl">
                        <p class="text-green-800 font-bold text-lg">🎉 اختيار ممتاز!</p>
                        <p class="text-green-700">"${e.target.textContent}" فاعل صحيح (${type})</p>
                    </div>
                `;
                totalExerciseScore += 12;
            } else {
                e.target.classList.add('bg-red-500', 'text-white');
                feedbackElement.innerHTML = `
                    <div class="bg-red-100 border-2 border-red-400 p-4 rounded-xl">
                        <p class="text-red-800 font-bold text-lg">❌ اختيار خاطئ</p>
                        <p class="text-red-700">"${e.target.textContent}" ليس فاعلاً مناسباً</p>
                    </div>
                `;
            }
            
            feedbackElement.classList.remove('hidden');
            updateExerciseScore();
        }

        function nextCompleteExercise() {
            currentCompleteIndex = (currentCompleteIndex + 1) % completeExercises.length;
            loadCompleteExercise();
        }

        // Correct Exercise Functions
        function initializeCorrectExercise() {
            loadCorrectExercise();
        }

        function loadCorrectExercise() {
            const exercise = correctExercises[currentCorrectIndex];
            document.getElementById('correct-sentence').innerHTML = exercise.sentence;
            
            // Add click event to error word
            const errorWord = document.querySelector('.error-word');
            errorWord.addEventListener('click', showCorrectionOptions);
            
            document.getElementById('correction-options').classList.add('hidden');
            document.getElementById('correct-feedback').classList.add('hidden');
        }

        function showCorrectionOptions() {
            const exercise = correctExercises[currentCorrectIndex];
            const optionsContainer = document.getElementById('correction-options');
            optionsContainer.classList.remove('hidden');
            
            optionsContainer.innerHTML = '';
            exercise.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'correction-option bg-white border-2 border-gray-300 hover:border-orange-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md';
                button.textContent = option;
                button.dataset.correction = option;
                button.addEventListener('click', handleCorrectionClick);
                optionsContainer.appendChild(button);
            });
        }

        function handleCorrectionClick(e) {
            const selectedCorrection = e.target.dataset.correction;
            const exercise = correctExercises[currentCorrectIndex];
            const feedbackElement = document.getElementById('correct-feedback');
            
            // Disable all buttons
            document.querySelectorAll('.correction-option').forEach(btn => {
                btn.disabled = true;
            });
            
            if (selectedCorrection === exercise.correct) {
                e.target.classList.add('bg-green-500', 'text-white');
                feedbackElement.innerHTML = `
                    <div class="bg-green-100 border-2 border-green-400 p-4 rounded-xl">
                        <p class="text-green-800 font-bold text-lg">🎉 تصحيح ممتاز!</p>
                        <p class="text-green-700">${exercise.explanation}</p>
                    </div>
                `;
                totalExerciseScore += 20;
            } else {
                e.target.classList.add('bg-red-500', 'text-white');
                feedbackElement.innerHTML = `
                    <div class="bg-red-100 border-2 border-red-400 p-4 rounded-xl">
                        <p class="text-red-800 font-bold text-lg">❌ تصحيح خاطئ</p>
                        <p class="text-red-700">${exercise.explanation}</p>
                    </div>
                `;
            }
            
            feedbackElement.classList.remove('hidden');
            updateExerciseScore();
        }

        function nextCorrectExercise() {
            currentCorrectIndex = (currentCorrectIndex + 1) % correctExercises.length;
            loadCorrectExercise();
        }



        function updateExerciseScore() {
            document.getElementById('total-exercise-score').textContent = totalExerciseScore;
        }

        function checkAnswer(button, isCorrect, questionNum) {
            const currentQuestionDiv = document.getElementById(`question${questionNum}`);
            const allButtons = currentQuestionDiv.querySelectorAll('.quiz-option');
            const resultDiv = document.getElementById('quiz-result');
            const correctDiv = document.getElementById('correct-answer');
            const wrongDiv = document.getElementById('wrong-answer');
            const correctExplanation = document.getElementById('correct-explanation');
            const wrongExplanation = document.getElementById('wrong-explanation');
            const nextBtn = document.getElementById('next-question');
            const retryBtn = document.getElementById('retry-question');
            const restartBtn = document.getElementById('restart-quiz');
            
            // Disable all buttons
            allButtons.forEach(btn => btn.disabled = true);
            
            if (isCorrect) {
                score++;
                button.classList.add('bg-green-500', 'bg-opacity-80', 'pulse-glow');
                correctDiv.classList.remove('hidden');
                wrongDiv.classList.add('hidden');
                correctExplanation.textContent = questionData[questionNum].correct;
                
                if (questionNum < totalQuestions) {
                    nextBtn.classList.remove('hidden');
                } else {
                    restartBtn.classList.remove('hidden');
                    setTimeout(() => {
                        showQuizComplete();
                    }, 2000);
                }
            } else {
                button.classList.add('bg-red-500', 'bg-opacity-80');
                wrongDiv.classList.remove('hidden');
                correctDiv.classList.add('hidden');
                wrongExplanation.textContent = questionData[questionNum].wrong;
                retryBtn.classList.remove('hidden');
            }
            
            resultDiv.classList.remove('hidden');
        }

        function nextQuestion() {
            // Hide current question and result
            document.getElementById(`question${currentQuestion}`).classList.add('hidden');
            document.getElementById('quiz-result').classList.add('hidden');
            
            // Reset result buttons
            document.getElementById('next-question').classList.add('hidden');
            document.getElementById('retry-question').classList.add('hidden');
            document.getElementById('correct-answer').classList.add('hidden');
            document.getElementById('wrong-answer').classList.add('hidden');
            
            // Show next question
            currentQuestion++;
            document.getElementById(`question${currentQuestion}`).classList.remove('hidden');
        }

        function resetCurrentQuestion() {
            const currentQuestionDiv = document.getElementById(`question${currentQuestion}`);
            const allButtons = currentQuestionDiv.querySelectorAll('.quiz-option');
            const resultDiv = document.getElementById('quiz-result');
            
            allButtons.forEach(btn => {
                btn.disabled = false;
                btn.className = 'quiz-option bg-white border-2 border-gray-300 hover:border-purple-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg';
            });
            
            resultDiv.classList.add('hidden');
        }

        function restartQuiz() {
            currentQuestion = 1;
            score = 0;
            
            // Hide all questions and results
            for (let i = 1; i <= totalQuestions; i++) {
                document.getElementById(`question${i}`).classList.add('hidden');
            }
            document.getElementById('quiz-result').classList.add('hidden');
            document.getElementById('quiz-complete').classList.add('hidden');
            
            // Reset all buttons
            document.querySelectorAll('.quiz-option').forEach(btn => {
                btn.disabled = false;
                btn.className = 'quiz-option bg-white border-2 border-gray-300 hover:border-purple-500 text-gray-800 p-4 rounded-xl transition-all duration-300 font-semibold shadow-md hover:shadow-lg';
            });
            
            // Show first question
            document.getElementById('question1').classList.remove('hidden');
        }

        function showQuizComplete() {
            document.getElementById('quiz-result').classList.add('hidden');
            document.getElementById('quiz-complete').classList.remove('hidden');
            document.getElementById('final-score').textContent = `${score}/${totalQuestions}`;
        }

        // Enhanced Word Game Variables
        let currentGameIndex = 0;
        let currentSentenceWords = [];
        let gameScore = 0;
        
        const wordGameSentences = [
            {
                words: ['يلعب', 'الأطفال', 'في', 'الحديقة'],
                correct: ['يلعب', 'الأطفال', 'في', 'الحديقة'],
                verb: 'يلعب',
                subject: 'الأطفال',
                subjectType: 'اسم ظاهر (جمع تكسير)',
                hint: 'ابدأ بالفعل الذي يدل على اللعب، ثم من يقوم باللعب'
            },
            {
                words: ['قرأت', 'البنت', 'الكتاب'],
                correct: ['قرأت', 'البنت', 'الكتاب'],
                verb: 'قرأت',
                subject: 'البنت',
                subjectType: 'اسم ظاهر (مفرد)',
                hint: 'ابدأ بالفعل الماضي للقراءة، ثم من قامت بالقراءة'
            },
            {
                words: ['في', 'لعبت', 'البنات', 'الحديقة'],
                correct: ['لعبت', 'البنات', 'في', 'الحديقة'],
                verb: 'لعبت',
                subject: 'البنات',
                subjectType: 'اسم ظاهر (جمع مؤنث سالم)',
                hint: 'ابدأ بالفعل الماضي للعب، ثم من قمن باللعب'
            },
            {
                words: ['الكرة', 'الأولاد', 'ركل'],
                correct: ['ركل', 'الأولاد', 'الكرة'],
                verb: 'ركل',
                subject: 'الأولاد',
                subjectType: 'اسم ظاهر (جمع تكسير)',
                hint: 'ابدأ بالفعل الذي يدل على الركل، ثم من قام بالركل'
            },
            {
                words: ['المعلمات', 'شرحت', 'الدرس'],
                correct: ['شرحت', 'المعلمات', 'الدرس'],
                verb: 'شرحت',
                subject: 'المعلمات',
                subjectType: 'اسم ظاهر (جمع مؤنث سالم)',
                hint: 'ابدأ بالفعل الماضي للشرح، ثم من قمن بالشرح'
            },
            {
                words: ['جاء', 'المعلم', 'إلى', 'المدرسة'],
                correct: ['جاء', 'المعلم', 'إلى', 'المدرسة'],
                verb: 'جاء',
                subject: 'المعلم',
                subjectType: 'اسم ظاهر (مفرد)',
                hint: 'ابدأ بالفعل الماضي للمجيء، ثم من جاء'
            },
            {
                words: ['كتب', 'الطالب', 'الواجب', 'بعناية'],
                correct: ['كتب', 'الطالب', 'الواجب', 'بعناية'],
                verb: 'كتب',
                subject: 'الطالب',
                subjectType: 'اسم ظاهر (مفرد)',
                hint: 'ابدأ بالفعل الماضي للكتابة، ثم من كتب'
            },
            {
                words: ['سافرت', 'الأسر', 'في', 'الإجازة'],
                correct: ['سافرت', 'الأسر', 'في', 'الإجازة'],
                verb: 'سافرت',
                subject: 'الأسر',
                subjectType: 'اسم ظاهر (جمع تكسير)',
                hint: 'ابدأ بالفعل الماضي للسفر، ثم من سافر'
            },
            {
                words: ['تدرس', 'الطالبات', 'بجد', 'واجتهاد'],
                correct: ['تدرس', 'الطالبات', 'بجد', 'واجتهاد'],
                verb: 'تدرس',
                subject: 'الطالبات',
                subjectType: 'اسم ظاهر (جمع مؤنث سالم)',
                hint: 'ابدأ بالفعل المضارع للدراسة، ثم من تدرس'
            },
            {
                words: ['نام', 'الأطفال', 'مبكراً', 'الليلة'],
                correct: ['نام', 'الأطفال', 'مبكراً', 'الليلة'],
                verb: 'نام',
                subject: 'الأطفال',
                subjectType: 'اسم ظاهر (جمع تكسير)',
                hint: 'ابدأ بالفعل الماضي للنوم، ثم من نام'
            }
        ];

        function initializeWordGame() {
            updateGameProgress();
            loadWordGame();
        }

        function updateGameProgress() {
            document.getElementById('current-sentence-number').textContent = currentGameIndex + 1;
            document.getElementById('total-sentences').textContent = wordGameSentences.length;
            document.getElementById('game-score').textContent = gameScore;
        }

        function loadWordGame() {
            const currentGame = wordGameSentences[currentGameIndex];
            const scatteredWordsDiv = document.getElementById('scattered-words');
            const sentenceArea = document.getElementById('sentence-area');
            
            // Clear previous game
            scatteredWordsDiv.innerHTML = '';
            sentenceArea.innerHTML = '<p class="text-gray-600 text-xl" id="drop-hint">👆 اضغط على الكلمات أعلاه لتكوين الجملة</p>';
            currentSentenceWords = [];
            
            // Hide hint and result
            document.getElementById('hint-area').classList.add('hidden');
            document.getElementById('word-game-result').classList.add('hidden');
            
            // Shuffle words
            const shuffledWords = [...currentGame.words].sort(() => Math.random() - 0.5);
            
            // Create word elements with enhanced styling
            shuffledWords.forEach((word, index) => {
                const wordElement = document.createElement('div');
                wordElement.className = 'word-item bg-white bg-opacity-90 text-gray-800 px-6 py-4 rounded-2xl shadow-lg cursor-pointer hover:bg-opacity-100 hover:scale-110 transition-all duration-300 border-2 border-white font-bold text-lg transform';
                wordElement.textContent = word;
                wordElement.dataset.word = word;
                wordElement.addEventListener('click', handleWordClick);
                
                scatteredWordsDiv.appendChild(wordElement);
            });
            
            updateGameProgress();
        }

        function handleWordClick(e) {
            const word = e.target.dataset.word;
            addWordToSentence(word, e.target);
        }

        function addWordToSentence(word, wordElement) {
            const sentenceArea = document.getElementById('sentence-area');
            const dropHint = document.getElementById('drop-hint');
            
            // Remove hint if it exists
            if (dropHint) {
                dropHint.remove();
            }
            
            // Create word in sentence area with enhanced animation
            const sentenceWordElement = document.createElement('div');
            sentenceWordElement.className = 'sentence-word bg-blue-500 bg-opacity-80 text-white px-6 py-3 rounded-xl cursor-pointer hover:bg-red-500 transition-all duration-300 font-bold text-lg border-2 border-white bounce-in transform hover:scale-105';
            sentenceWordElement.textContent = word;
            sentenceWordElement.dataset.word = word;
            sentenceWordElement.addEventListener('click', () => removeWordFromSentence(sentenceWordElement));
            
            sentenceArea.appendChild(sentenceWordElement);
            currentSentenceWords.push(word);
            
            // Remove from scattered words with animation
            wordElement.style.transform = 'scale(0) rotate(180deg)';
            setTimeout(() => wordElement.remove(), 300);
        }

        function removeWordFromSentence(wordElement) {
            const word = wordElement.dataset.word;
            const scatteredWordsDiv = document.getElementById('scattered-words');
            
            // Create word back in scattered area
            const newWordElement = document.createElement('div');
            newWordElement.className = 'word-item bg-white bg-opacity-90 text-gray-800 px-6 py-4 rounded-2xl shadow-lg cursor-pointer hover:bg-opacity-100 hover:scale-110 transition-all duration-300 border-2 border-white font-bold text-lg transform bounce-in';
            newWordElement.textContent = word;
            newWordElement.dataset.word = word;
            newWordElement.addEventListener('click', handleWordClick);
            
            scatteredWordsDiv.appendChild(newWordElement);
            
            // Remove from sentence
            wordElement.style.transform = 'scale(0) rotate(-180deg)';
            setTimeout(() => wordElement.remove(), 300);
            currentSentenceWords = currentSentenceWords.filter(w => w !== word);
            
            // Add hint back if sentence is empty
            const sentenceArea = document.getElementById('sentence-area');
            if (currentSentenceWords.length === 0) {
                setTimeout(() => {
                    if (sentenceArea.children.length === 0) {
                        sentenceArea.innerHTML = '<p class="text-gray-600 text-xl" id="drop-hint">👆 اضغط على الكلمات أعلاه لتكوين الجملة</p>';
                    }
                }, 350);
            }
        }

        function showHint() {
            const currentGame = wordGameSentences[currentGameIndex];
            const hintArea = document.getElementById('hint-area');
            const hintText = document.getElementById('hint-text');
            
            hintText.textContent = currentGame.hint;
            hintArea.classList.remove('hidden');
            
            // Hide hint after 7 seconds
            setTimeout(() => {
                hintArea.classList.add('hidden');
            }, 7000);
        }

        function checkSentence() {
            const currentGame = wordGameSentences[currentGameIndex];
            const resultDiv = document.getElementById('word-game-result');
            const feedback = document.getElementById('word-game-feedback');
            const analysis = document.getElementById('sentence-analysis');
            
            if (currentSentenceWords.length === 0) {
                resultDiv.className = 'hidden mt-6 p-8 rounded-2xl text-center bg-yellow-500 bg-opacity-80 text-white border-2 border-yellow-300';
                feedback.textContent = '⚠️ يرجى تكوين جملة أولاً';
                analysis.innerHTML = '';
                resultDiv.classList.remove('hidden');
                return;
            }
            
            const isCorrect = JSON.stringify(currentSentenceWords) === JSON.stringify(currentGame.correct);
            
            if (isCorrect) {
                gameScore += 15;
                resultDiv.className = 'hidden mt-6 p-8 rounded-2xl text-center bg-green-500 bg-opacity-80 text-white border-2 border-green-300 pulse-glow';
                feedback.textContent = '🎉 ممتاز! الجملة صحيحة! (+15 نقطة)';
                analysis.innerHTML = `
                    <div class="bg-white bg-opacity-20 p-6 rounded-xl mt-4 border-2 border-white border-opacity-30">
                        <p class="mb-3 text-xl"><span class="highlight-verb">${currentGame.verb}</span> = الفعل</p>
                        <p class="text-xl"><span class="highlight-subject">${currentGame.subject}</span> = الفاعل (${currentGame.subjectType})</p>
                    </div>
                `;
            } else {
                resultDiv.className = 'hidden mt-6 p-8 rounded-2xl text-center bg-red-500 bg-opacity-80 text-white border-2 border-red-300';
                feedback.textContent = '❌ الترتيب غير صحيح. حاول مرة أخرى!';
                analysis.innerHTML = `
                    <div class="bg-white bg-opacity-20 p-6 rounded-xl mt-4 border-2 border-white border-opacity-30">
                        <p class="text-white mb-3 text-lg">الترتيب الصحيح: <strong class="text-yellow-300">${currentGame.correct.join(' ')}</strong></p>
                        <p class="text-white">الفعل: <span class="highlight-verb">${currentGame.verb}</span> | الفاعل: <span class="highlight-subject">${currentGame.subject}</span></p>
                    </div>
                `;
            }
            
            resultDiv.classList.remove('hidden');
            updateGameProgress();
        }

        function clearSentence() {
            const sentenceArea = document.getElementById('sentence-area');
            const scatteredWordsDiv = document.getElementById('scattered-words');
            
            // Move all words back to scattered area with enhanced animation
            const sentenceWords = sentenceArea.querySelectorAll('.sentence-word');
            sentenceWords.forEach((wordElement, index) => {
                const word = wordElement.dataset.word;
                
                setTimeout(() => {
                    const newWordElement = document.createElement('div');
                    newWordElement.className = 'word-item bg-white bg-opacity-90 text-gray-800 px-6 py-4 rounded-2xl shadow-lg cursor-pointer hover:bg-opacity-100 hover:scale-110 transition-all duration-300 border-2 border-white font-bold text-lg transform bounce-in';
                    newWordElement.textContent = word;
                    newWordElement.dataset.word = word;
                    newWordElement.addEventListener('click', handleWordClick);
                    
                    scatteredWordsDiv.appendChild(newWordElement);
                }, index * 150);
                
                wordElement.style.transform = 'scale(0) rotate(360deg)';
                setTimeout(() => wordElement.remove(), index * 150 + 300);
            });
            
            // Clear sentence area
            setTimeout(() => {
                sentenceArea.innerHTML = '<p class="text-gray-600 text-xl" id="drop-hint">👆 اضغط على الكلمات أعلاه لتكوين الجملة</p>';
                currentSentenceWords = [];
            }, sentenceWords.length * 150 + 400);
            
            // Hide result and hint
            document.getElementById('word-game-result').classList.add('hidden');
            document.getElementById('hint-area').classList.add('hidden');
        }

        function nextWordGame() {
            currentGameIndex = (currentGameIndex + 1) % wordGameSentences.length;
            loadWordGame();
        }

        // Initialize word game when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeWordGame();
            // Initialize first exercise
            showExercise('identify');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'989f819406def9d7',t:'MTc1OTY5NDQzNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
